{"ast":null,"code":"var _jsxFileName = \"/Users/sherikwong/Desktop/okay-inventory/src/components/item/Item.tsx\";\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Box } from 'grommet';\nimport queryString from 'query-string';\nimport React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Swipeable } from 'react-swipeable';\nimport { itemsDB } from '../../database/items';\nimport useItem from '../../hooks/useItem';\nimport Tags from '../reusable/Tags/Tags';\nimport './Item.scss';\nimport { ContrastingText, Header, Number } from './Item.styles';\nimport BouncingArrowOverlay from './Overlay/Overlay';\nimport { useDoubleClick } from '@zattoo/use-double-click';\nvar EditableField;\n\n(function (EditableField) {\n  EditableField[EditableField[\"NAME\"] = 0] = \"NAME\";\n  EditableField[EditableField[\"NONE\"] = 1] = \"NONE\";\n})(EditableField || (EditableField = {}));\n\nconst Item = props => {\n  const {\n    match,\n    location\n  } = props;\n  const queryObj = queryString.parse(location.search);\n  const [isEditing, setEditing] = useState(EditableField.NONE);\n  const {\n    details,\n    setDetails\n  } = useItem(match.params.id);\n  const [hasInitialized, setInitialized] = useState(false);\n\n  const alterQty = (num, quan = details.quantity) => {\n    const sanitizedQuantity = isNaN(+quan) ? 0 : +quan;\n    const updatedNum = sanitizedQuantity + +num;\n    const updatedDetails = { ...details,\n      quantity: updatedNum\n    };\n    setDetails(updatedDetails);\n    itemsDB.update(details.id, updatedDetails);\n  };\n\n  useEffect(() => {\n    if (!hasInitialized && details.name) {\n      if (queryObj && queryObj.qty) {\n        setInitialized(true);\n        alterQty(+queryObj.qty);\n      }\n    }\n  }, [details, hasInitialized]);\n  const toggleName = useDoubleClick(() => {\n    setEditing(EditableField.NAME);\n  });\n  const toggleEditOff = useDoubleClick(() => {\n    setEditing(EditableField.NONE);\n  });\n  return details.name ? /*#__PURE__*/React.createElement(Swipeable, {\n    onSwipedDown: () => alterQty(-1),\n    onSwipedUp: () => alterQty(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    direction: \"column\",\n    fill: true,\n    align: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Number, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \" \", details.quantity), /*#__PURE__*/React.createElement(Header, {\n    className: \"header-wrapper\",\n    onClick: toggleName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, isEditing === EditableField.NAME ? /*#__PURE__*/React.createElement(\"input\", {\n    value: details.name,\n    placeholder: \"Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }) : details && details.name ? details.name.toUpperCase() : ''), /*#__PURE__*/React.createElement(ContrastingText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, details.date && new Date(details.date).toLocaleDateString(\"en-US\")), /*#__PURE__*/React.createElement(Tags, {\n    tags: details.tags,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }))), queryObj && queryObj.qty && /*#__PURE__*/React.createElement(BouncingArrowOverlay, {\n    direction: \"down\",\n    className: \"animate__animated animate__fadeOut animate__slower\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 36\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nexport default withRouter(Item);","map":{"version":3,"sources":["/Users/sherikwong/Desktop/okay-inventory/src/components/item/Item.tsx"],"names":["Box","queryString","React","useEffect","useState","withRouter","Swipeable","itemsDB","useItem","Tags","ContrastingText","Header","Number","BouncingArrowOverlay","useDoubleClick","EditableField","Item","props","match","location","queryObj","parse","search","isEditing","setEditing","NONE","details","setDetails","params","id","hasInitialized","setInitialized","alterQty","num","quan","quantity","sanitizedQuantity","isNaN","updatedNum","updatedDetails","update","name","qty","toggleName","NAME","toggleEditOff","toUpperCase","date","Date","toLocaleDateString","tags"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Box } from 'grommet';\nimport queryString from 'query-string';\nimport React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Swipeable } from 'react-swipeable';\nimport { itemsDB } from '../../database/items';\nimport useItem from '../../hooks/useItem';\nimport Tags from '../reusable/Tags/Tags';\nimport './Item.scss';\nimport { ContrastingText, Header, Number } from './Item.styles';\nimport BouncingArrowOverlay from './Overlay/Overlay';\nimport { useDoubleClick } from '@zattoo/use-double-click';\n\nenum EditableField {\n  NAME,\n  NONE\n}\n\n\nconst Item = (props) => {\n  const { match, location } = props;\n  const queryObj = queryString.parse(location.search);\n  const [isEditing, setEditing] = useState(EditableField.NONE);\n\n  const { details, setDetails } = useItem(match.params.id);\n  const [hasInitialized, setInitialized] = useState(false);\n\n  const alterQty = (num, quan = details.quantity) => {\n    const sanitizedQuantity = isNaN(+quan) ? 0 : +quan;\n\n    const updatedNum = sanitizedQuantity + +num;\n\n    const updatedDetails = {\n      ...details,\n      quantity: updatedNum\n    };\n\n    setDetails(updatedDetails);\n\n    itemsDB.update(details.id, updatedDetails);\n  };\n\n  useEffect(() => {\n    if (!hasInitialized && details.name) {\n      if (queryObj && queryObj.qty) {\n        setInitialized(true);\n        alterQty(+queryObj.qty);\n      }\n\n    }\n  }, [details, hasInitialized]);\n\n  const toggleName = useDoubleClick(() => {\n    setEditing(EditableField.NAME);\n  });\n\n  const toggleEditOff = useDoubleClick(() => {\n    setEditing(EditableField.NONE);\n\n\n  });\n\n\n  return details.name ? (\n    <Swipeable onSwipedDown={() => alterQty(-1)} onSwipedUp={() => alterQty(1)}>\n\n      <Box direction=\"column\" fill={true} align=\"center\" justify=\"center\">\n\n        <Box align=\"center\">\n          <Number> {details.quantity}</Number>\n\n          <Header className=\"header-wrapper\" onClick={toggleName}>\n            {\n              isEditing === EditableField.NAME\n                ?\n                <input value={details.name} placeholder=\"Name\" />\n                : (details && details.name) ? details.name.toUpperCase() : ''\n            }\n          </Header>\n\n\n          <ContrastingText>\n            {details.date && new Date(details.date).toLocaleDateString(\"en-US\")}\n          </ContrastingText>\n          {/* <CalendarIcon date={details.date} /> */}\n\n          <Tags tags={details.tags} />\n        </Box>\n\n\n      </Box>\n\n      {queryObj && queryObj.qty && <BouncingArrowOverlay direction=\"down\" className=\"animate__animated animate__fadeOut animate__slower\" />}\n\n    </Swipeable>\n  ) : (<></>);\n}\n\nexport default withRouter(Item);\n\n"]},"metadata":{},"sourceType":"module"}