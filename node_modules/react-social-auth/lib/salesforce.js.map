{"version":3,"sources":["../src/salesforce.js"],"names":["init","onSuccess","localStorage","salesforceLoginState","redirectUri","salesforceReactLoginRedirectUri","code","state","window","history","replaceState","type","authResponse","onClick","appId","location","href","length"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEO,IAAIA,IAAI,GAAG,SAAPA,IAAO,OAAmB;AAAA,MAAhBC,SAAgB,QAAhBA,SAAgB;;AACnC,MAAIC,YAAY,CAACC,oBAAjB,EAAuC;AACrC,QAAIC,WAAW,GAAGF,YAAY,CAACG,+BAA/B;AACA,QAAIC,IAAI,GAAG,+BAAkB,MAAlB,CAAX;AACA,QAAIC,KAAK,GAAG,+BAAkB,OAAlB,CAAZ;AACAC,IAAAA,MAAM,CAACC,OAAP,CAAeC,YAAf,CAA4B,IAA5B,EAAkC,IAAlC,EAAwCN,WAAxC;;AACA,QAAIE,IAAI,IAAIC,KAAK,KAAKL,YAAY,CAACC,oBAAnC,EAAyD;AACvD,aAAOD,YAAY,CAACC,oBAApB;AACAF,MAAAA,SAAS,CAAC;AACRU,QAAAA,IAAI,EAAE,YADE;AAERC,QAAAA,YAAY,EAAE;AACZN,UAAAA,IAAI,EAAJA,IADY;AAEZF,UAAAA,WAAW,EAAXA;AAFY;AAFN,OAAD,CAAT;AAOD;AACF;AACF,CAjBM;;;;AAmBA,IAAIS,OAAO,GAAG,SAAVA,OAAU,QAAmD;AAAA,MAAhDC,KAAgD,SAAhDA,KAAgD;AAAA,gCAAzCV,WAAyC;AAAA,MAAzCA,WAAyC,kCAA3BI,MAAM,CAACO,QAAP,CAAgBC,IAAW;AACtEd,EAAAA,YAAY,CAACG,+BAAb,GAA+CD,WAA/C;AACAF,EAAAA,YAAY,CAACC,oBAAb,GAAoC,yBAAc;AAAEc,IAAAA,MAAM,EAAE;AAAV,GAAd,CAApC;AACAT,EAAAA,MAAM,CAACO,QAAP,CAAgBC,IAAhB,iGAA8GF,KAA9G,2BAAoIV,WAApI,oBAAyJF,YAAY,CAACC,oBAAtK;AACD,CAJM","sourcesContent":["import { getQueryParameter } from './common'\nimport generateState from 'simple-random/browser'\n\nexport let init = ({ onSuccess }) => {\n  if (localStorage.salesforceLoginState) {\n    let redirectUri = localStorage.salesforceReactLoginRedirectUri\n    let code = getQueryParameter('code')\n    let state = getQueryParameter('state')\n    window.history.replaceState(null, null, redirectUri)\n    if (code && state === localStorage.salesforceLoginState) {\n      delete localStorage.salesforceLoginState\n      onSuccess({\n        type: 'salesforce',\n        authResponse: {\n          code,\n          redirectUri,\n        },\n      })\n    }\n  }\n}\n\nexport let onClick = ({ appId, redirectUri = window.location.href }) => {\n  localStorage.salesforceReactLoginRedirectUri = redirectUri\n  localStorage.salesforceLoginState = generateState({ length: 8 })\n  window.location.href = `https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=${appId}&redirect_uri=${redirectUri}&state=${localStorage.salesforceLoginState}`\n}\n"],"file":"salesforce.js"}